<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>下拉</title>
    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link rel="stylesheet" href="../../js/lib/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../js/lib/bootstrap-table/bootstrap-table.css">

    <script src="../../js/lib/jquery/jquery-3.1.1.min.js"></script>
    <script src="../../js/lib/bootstrap/js/bootstrap.min.js"></script>
    <script src="../../js/lib/bootstrap-table/bootstrap-table.js"></script>

    <script src="http://localhost:8082/Content/vendor.js"></script>
    <script src="http://localhost:8082/Content/portal.js"></script>

</head>

<body>
    <div class="container" id="container">

        <pks:table :id="'pttable'" :datasource="datasource" :onrowclick="onrowclick" :columnoptions="columnoptions" :tableoptions="tableoptions"></pks:table>
        <div class="row">
            <input type="button" onclick="changeDataSource()" value="切换数据源" />
        </div>
    </div>
</body>

</html>
<script>
    /*此示例演示通过赋值data加载数据*/
    // function getList(count) {
    //     var list;
    //     $.ajax({
    //         url: '../../../Mock/pttable.json',
    //         type: "get",
    //         dataType: "json",
    //         async: false,
    //         success: function (data) {
    //             list = data;
    //         },
    //         error: function () {
    //             alert("error");
    //         }
    //     });
    //     return list;
    // }
    var dataList = [
        {
            "tablename": "井1",
            "data": [
                {
                    "name": "名称1",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户1",
                    "address": "地址1"
                },
                {
                    "name": "名称2",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户2",
                    "address": "地址1"
                },
                {
                    "name": "名称3",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户3",
                    "address": "地址1"
                },
                {
                    "name": "名称4",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户4",
                    "address": "地址1"
                },
                {
                    "name": "名称5",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户5",
                    "address": "地址1"
                },
                {
                    "name": "名称6",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户6",
                    "address": "地址1"
                },
                {
                    "name": "名称7",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户7",
                    "address": "地址1"
                },
                {
                    "name": "名称8",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户8",
                    "address": "地址1"
                },
                {
                    "name": "名称9",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户9",
                    "address": "地址1"
                },
                {
                    "name": "名称10",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户10",
                    "address": "地址1"
                },
                {
                    "name": "名称11",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户11",
                    "address": "地址1"
                },
                {
                    "name": "名称12",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户12",
                    "address": "地址1"
                }
            ]
        },
        {
            "tablename": "井2",
            "data": [
                {
                    "name": "井2-名称1",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户1",
                    "address": "地址1"
                },
                {
                    "name": "井2-名称2",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户1",
                    "address": "地址2"
                },
                {
                    "name": "井2-名称3",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户1",
                    "address": "地址3"
                },
                {
                    "name": "井2-名称4",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户1",
                    "address": "地址4"
                },
                {
                    "name": "井2-名称5",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户1",
                    "address": "地址5"
                },
                {
                    "name": "井2-名称6",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户1",
                    "address": "地址6"
                },
                {
                    "name": "井2-名称7",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户1",
                    "address": "地址1"
                },
                {
                    "name": "井2-名称8",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户1",
                    "address": "地址1"
                },
                {
                    "name": "井2-名称9",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户1",
                    "address": "地址1"
                },
                {
                    "name": "井2-名称10",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户1",
                    "address": "地址1"
                },
                {
                    "name": "井2-名称11",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户1",
                    "address": "地址1"
                },
                {
                    "name": "井2-名称12",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户1",
                    "address": "地址1"
                },
                {
                    "name": "井2-名称13",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户1",
                    "address": "地址1"
                },
                {
                    "name": "井2-名称14",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户1",
                    "address": "地址1"
                },
                {
                    "name": "井2-名称15",
                    "createdtime": "2012-2-2 13:30:30",
                    "username": "用户1",
                    "address": "地址1"
                }
            ]
        }
    ];

    /*给组件提供data,如果显示分页，则客户端分页，data为所需要的全部数据*/
    var vm = PKSUI.bind({
        el: "#container",
        data: {
            onrowclick: function (e, row, $element, tablename) {
                alert(row.name)
            },
            datasource: dataList,
            tableoptions: [{
                "tablename": "井1",
                "tableoption": {
                    maintainSelected: false,
                    pageSize: 5,

                    showPaginationSwitch: false,
                    // singleSelect: false,
                    sortable: true,
                    totalField: "total",
                    undefinedText: '-',
                    selectedRowIndex: 0
                }
            }],
            columnoptions: [{
                "tablename": "井1",
                "columnoption": [
                    [{
                        "field": "name",
                        "align": "center",
                        "order": "asc",
                        "radio": false,
                        "sortable": false,
                        "title": "名称name",
                        rowspan: 2
                    },
                    {
                        align: "center",
                        title: "信息",
                        colspan: 3
                    }
                    ],
                    [{
                        field: "createdtime",
                        title: "日期"
                    },
                    {
                        field: "username",
                        title: "用户名"
                    },
                    {
                        field: "address",
                        title: "地址"
                    }
                    ]
                ]
            }, {
                "tablename": "井2",
                "columnoption": [
                    [{
                        "field": "name",
                        "align": "center",
                        "order": "asc",
                        "radio": false,
                        "sortable": false,
                        "title": "名称name"
                    },
                    {
                        field: "createdtime",
                        title: "日期"
                    },
                    {
                        field: "username",
                        clickToSelect: true,
                        title: "用户名"
                    },
                    {
                        field: "address",
                        title: "地址"
                    }
                    ]
                ]
            }]
        },
        model: 'pks:table'
    });
    function getList2() {
        var list;
        $.ajax({
            url: '../../../Mock/pttable2.json',
            type: "get",
            dataType: "json",
            async: false,
            success: function (data) {
                list = data;
            },
            error: function () {
                alert("error");
            }
        });
        return list;
    }
    function changeDataSource() {
        var dataList2 = getList2();
        vm.datasource = dataList2;

    }

</script>